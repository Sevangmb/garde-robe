{% extends 'vetements/base.html' %}

{% block title %}Mes Valises - Ma Garde-Robe{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ§³ Mes Valises de Voyage</h1>
    <p class="subtitle">Planifiez et suivez le contenu de vos valises</p>
</div>

{% if valises_en_cours %}
<div class="section">
    <h2>âœˆï¸ Voyage en cours</h2>
    {% for valise in valises_en_cours %}
    <div class="valise-card active">
        <div class="valise-header">
            <h3>{{ valise.nom }}</h3>
            <span class="badge">En cours</span>
        </div>
        <div class="valise-info">
            <p><strong>ğŸ“ Destination:</strong> {{ valise.destination }}</p>
            <p><strong>ğŸ“… Dates:</strong> {{ valise.date_depart|date:"d/m/Y" }} - {{ valise.date_retour|date:"d/m/Y" }} ({{ valise.duree_sejour }} jours)</p>
            <p><strong>ğŸ’ Type:</strong> {{ valise.get_type_voyage_display }}</p>
            {% if valise.meteo_prevue %}
            <p><strong>ğŸŒ¤ï¸ MÃ©tÃ©o:</strong> {{ valise.meteo_prevue }}</p>
            {% endif %}
            <p><strong>ğŸ‘• Contenu:</strong> {{ valise.nombre_vetements }} vÃªtement(s)</p>
        </div>
        <div class="valise-actions">
            <a href="{% url 'vetements:valise_detail' valise.pk %}" class="btn">Voir dÃ©tails</a>
            <a href="/admin/vetements/valise/{{ valise.pk }}/change/" class="btn btn-primary">Modifier</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% if valises_futures %}
<div class="section">
    <h2>ğŸ“… Voyages Ã  venir</h2>
    <div class="valises-grid">
        {% for valise in valises_futures %}
        <div class="valise-card {% if valise.checklist_faite %}ready{% endif %}">
            <div class="valise-header">
                <h3>{{ valise.nom }}</h3>
                <span class="badge {% if valise.statut == 'prete' %}success{% endif %}">
                    {{ valise.get_statut_display }}
                </span>
            </div>
            <div class="valise-info">
                <p><strong>ğŸ“</strong> {{ valise.destination }}</p>
                <p><strong>ğŸ“…</strong> DÃ©part: {{ valise.date_depart|date:"d/m/Y" }}</p>
                <p><strong>â±ï¸</strong> {{ valise.duree_sejour }} jour(s)</p>
                <p><strong>ğŸ’</strong> {{ valise.get_type_voyage_display }}</p>
                {% if valise.climat %}
                <p><strong>ğŸŒ¡ï¸</strong> {{ valise.climat }}</p>
                {% endif %}
                <p><strong>ğŸ‘•</strong> {{ valise.nombre_vetements }} vÃªtement(s)</p>
                {% if valise.checklist_faite %}
                <p class="alert success">âœ… Checklist complÃ¨te</p>
                {% endif %}
            </div>
            <div class="valise-actions">
                <a href="{% url 'vetements:valise_detail' valise.pk %}" class="btn">Voir dÃ©tails</a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{% if valises_passees %}
<div class="section">
    <h2>ğŸ“¦ Voyages passÃ©s (historique)</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Voyage</th>
                <th>Destination</th>
                <th>Dates</th>
                <th>DurÃ©e</th>
                <th>VÃªtements</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for valise in valises_passees %}
            <tr>
                <td><strong>{{ valise.nom }}</strong></td>
                <td>{{ valise.destination }}</td>
                <td>{{ valise.date_depart|date:"d/m/Y" }} - {{ valise.date_retour|date:"d/m/Y" }}</td>
                <td>{{ valise.duree_sejour }} jour(s)</td>
                <td>{{ valise.nombre_vetements }}</td>
                <td>
                    <a href="{% url 'vetements:valise_detail' valise.pk %}" class="btn btn-small">Voir</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

{% if not valises_futures and not valises_en_cours and not valises_passees %}
<div class="alert">
    <p>Aucune valise enregistrÃ©e pour le moment.</p>
    <p>CrÃ©ez votre premiÃ¨re valise pour prÃ©parer un voyage!</p>
</div>
{% endif %}

<div class="actions">
    <a href="{% url 'vetements:accueil' %}" class="btn btn-secondary">Retour au tableau de bord</a>
    <a href="/admin/vetements/valise/add/" class="btn btn-success">CrÃ©er une nouvelle valise</a>
</div>
{% endblock %}
